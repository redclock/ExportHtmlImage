# ğŸ¯ Chrome Data URI Exporter

> A powerful Node.js tool for monitoring and exporting all data URI (base64-encoded) resources from Chrome web pages, including images, fonts, audio, and more.

[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Puppeteer](https://img.shields.io/badge/Puppeteer-21.5-blue.svg)](https://pptr.dev/)

## âœ¨ Features

- ğŸ” **Comprehensive Monitoring**: Automatically captures data URIs from network requests, DOM changes, and API calls
- ğŸµ **WebAudio Support**: Intercepts AudioContext API to capture and export audio as WAV format
- ğŸ”„ **Real-time Detection**: Uses MutationObserver to monitor DOM changes in real-time
- ğŸ® **Interactive Operations**: Supports page interactions and automatically captures dynamically loaded resources after operations
- ğŸ“¦ **Auto Recognition**: Intelligently identifies file types (png, jpg, woff, mp3, wav, etc.)
- ğŸš« **Smart Deduplication**: Automatically avoids saving duplicate resources
- ğŸ’» **Command-line Interface**: Provides rich interactive commands
- ğŸ”Œ **Auto Exit**: Automatically stops script when browser closes

## ğŸš€ Quick Start

### Installation

```bash
npm install
```

### Usage

```bash
# Access local HTML file
node index.js document.html

# Access network URL
node index.js https://example.com

# Using npm
npm start document.html
```

## ğŸ“– Usage Examples

### Basic Usage

```bash
# 1. Start the script
node index.js https://example.com

# 2. Operate the page in browser (click, scroll, etc.)
# 3. Script automatically captures all data URI resources
# 4. Files are saved to exported_files/ directory
```

### Interactive Commands

After the script starts, you can use the following commands:

- `Enter` or `scan` - Immediately scan the page
- `stop` - Stop periodic scanning
- `start` - Start periodic scanning
- `status` - View current status
- `Ctrl+C` - Exit program

## ğŸ¯ Supported File Types

| Type | Formats |
|------|---------|
| **Images** | PNG, JPG, GIF, WebP, SVG |
| **Fonts** | WOFF, WOFF2, TTF, OTF |
| **Audio** | MP3, WAV, OGG, WebM |
| **Video** | MP4, WebM |
| **Others** | PDF, CSS, JS |

## ğŸ”§ How It Works

The script monitors and captures resources through multiple mechanisms:

1. **Network Interception**: Listens to `page.on('request')` and `page.on('response')`
2. **API Interception**: Intercepts APIs like `fetch`, `XMLHttpRequest`, `AudioContext`, etc.
3. **DOM Monitoring**: Uses `MutationObserver` to monitor DOM changes
4. **Periodic Scanning**: Automatically scans the page every 2 seconds
5. **Script Injection**: Injects interception code before page loads

### Monitoring Mechanism

```
Page Operation â†’ DOM Change/API Call â†’ Interception Detection â†’ Data Extraction â†’ Save File
      â†“                  â†“                    â†“                    â†“              â†“
User Interaction  MutationObserver      API Intercept    exposeFunction    File System
```

## ğŸ“ Output Format

All files are saved in the `exported_files/` directory:

```
exported_files/
â”œâ”€â”€ file_1_1234567890.png
â”œâ”€â”€ file_2_1234567890.jpg
â”œâ”€â”€ audio_1_1234567890.wav
â””â”€â”€ file_3_1234567890.woff
```

## ğŸ› ï¸ Tech Stack

- **[Puppeteer](https://pptr.dev/)** - Browser automation
- **MutationObserver** - DOM change monitoring
- **WebAudio API** - Audio processing
- **Node.js** - Runtime environment

## ğŸ“š Documentation

- **[Technical Details](./TECHNICAL.md)** - Deep dive into implementation principles and monitoring mechanisms
- **[Usage Guide](#-usage-examples)** - Detailed usage instructions

## ğŸ’¡ Use Cases

- ğŸ¨ Extract embedded images and resources from web pages
- ğŸµ Capture audio generated by WebAudio
- ğŸ”¤ Export font files used by web pages
- ğŸ“¦ Batch export data URI resources
- ğŸ” Analyze web page resource usage

## âš ï¸ Notes

- Script keeps browser open, press `Ctrl+C` to exit
- Script automatically stops when browser closes
- Some cross-origin resources may not be accessible
- WebAudio audio is automatically converted to WAV format

## ğŸ¤ Contributing

Issues and Pull Requests are welcome!

## ğŸ“„ License

MIT License

---

**â­ If this project helps you, please give it a Star!**
